---
// Hero Component
// High-impact hero section with customizable headline, description, and CTAs
// Features: responsive design, grid-pattern, animated terminal
import GlassPanel from './GlassPanel.astro';

interface Props {
  title?: string;
  subtitle?: string;
  description?: string;
  terminal_text?: string;
  primaryCTA?: {
    text: string;
    url: string;
  };
  secondaryCTA?: {
    text: string;
    url: string;
  };
}

const {
  title = "Plant the Future. Source the Scale.",
  subtitle = "Multidisciplinary Project Foundations",
  description = "Seed & Source provides the high-fidelity foundations for those who build for the long game. From enterprise-grade code to creative mastery—bootstrap your next 'seed' in seconds.",
  terminal_text = "sscli new saas-platform",
  primaryCTA = { text: "Get Alpha Access", url: "/signup" },
  secondaryCTA = { text: "View Ecosystem", url: "#ecosystem" },
} = Astro.props;
---

<section id="hero" class="relative min-h-screen flex items-center pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden bg-foundry-surface">
  <!-- Organic Background Pattern -->
  <div class="absolute inset-0 bg-grid-pattern opacity-10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"></div>
  
  <!-- Ambient Glows -->
  <div class="absolute top-[-20%] right-[-10%] w-[800px] h-[800px] bg-foundry-secondary/20 rounded-full blur-[100px] opacity-60"></div>
  <div class="absolute bottom-[-10%] left-[-10%] w-[600px] h-[600px] bg-foundry-accent/20 rounded-full blur-[80px] opacity-50"></div>

  <div class="container mx-auto px-6 relative z-10">
    <div class="flex flex-col items-center text-center max-w-5xl mx-auto">
      <!-- Badge -->
      <div class="relative inline-block mb-8 animate-fade-in-up">
        <span class="absolute -top-6 -right-12 bg-foundry-accent/20 text-foundry-primary text-xs font-bold px-3 py-1 rounded-full border border-foundry-secondary/20 shadow-sm transform rotate-6 hover:rotate-0 transition-transform duration-300 cursor-default">
            <i class="fa-solid fa-check-circle mr-1 text-foundry-secondary"></i> Stable: v2.1.0
        </span>
        <h1 class="font-serif text-5xl md:text-7xl lg:text-8xl font-bold text-foundry-primary leading-tight tracking-tight">
          {title.split('.').map((part, i) => (
            i === 0 ? <>{part}. <br/></> : <span class="text-transparent bg-clip-text bg-gradient-to-r from-foundry-secondary to-emerald-700 italic pr-2">{part}</span>
          ))}
        </h1>
      </div>

      <!-- Subtitle & Description -->
      <p class="text-lg md:text-xl text-foundry-text/70 max-w-2xl mb-10 leading-relaxed font-light">
        {description}
      </p>

      <!-- CTAs -->
      <div class="flex flex-col sm:flex-row gap-4 items-center mb-16">
          <a href={primaryCTA.url} class="bg-foundry-secondary hover:bg-emerald-600 text-white text-lg px-8 py-4 rounded-full font-medium transition-all shadow-glow hover:scale-105 flex items-center gap-3 group">
              <i class="fa-solid fa-leaf text-emerald-100 group-hover:rotate-12 transition-transform"></i>
              {primaryCTA.text}
          </a>
          <a href={secondaryCTA.url} class="bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 text-lg px-8 py-4 rounded-full font-medium transition-all hover:border-emerald-300 flex items-center gap-3">
              <i class="fa-solid fa-play text-foundry-secondary"></i>
              Watch Demo
          </a>
      </div>

      <!-- Terminal Component -->
      <div class="w-full max-w-4xl mx-auto animate-fade-in" style="animation-delay: 0.4s">
        <GlassPanel variant="dark" class="rounded-xl overflow-hidden shadow-2xl transition-transform duration-500 hover:scale-[1.02]">
            <!-- Terminal Header -->
            <div class="bg-foundry-primary/50 px-4 py-3 border-b border-foundry-secondary/20 flex items-center justify-between">
                <div class="flex gap-2">
                    <div class="w-3 h-3 rounded-full bg-red-500"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <div class="w-3 h-3 rounded-full bg-foundry-secondary"></div>
                </div>
                <div class="text-xs font-mono text-foundry-secondary/50">user@seed-source:~</div>
                <div class="w-16"></div>
            </div>
            
            <!-- Terminal Body -->
            <div class="p-6 font-mono text-sm h-48 sm:h-32 text-left bg-black/40">
                <div class="mb-4">
                    <span class="text-foundry-secondary">➜</span> <span class="text-blue-300">~</span> 
                    <span id="terminal-text" data-text={terminal_text}></span><span class="terminal-cursor"></span>
                </div>
                <div id="terminal-output" class="text-foundry-secondary/60 text-xs hidden">
                    > Preparing soil... done.<br/>
                    > Injecting multidisciplinary nutrients... done.<br/>
                    > Germination successful! Check ./my-new-project
                </div>
            </div>
        </GlassPanel>
      </div>
    </div>
  </div>
</section>

<script>
  // Simple Typing Animation
  document.addEventListener('DOMContentLoaded', () => {
    const termText = document.getElementById('terminal-text');
    const output = document.getElementById('terminal-output');
    if (!termText) return;

    const text = termText.getAttribute('data-text') || '';
    let i = 0;

    function type() {
      if (i < text.length) {
        termText.innerHTML += text.charAt(i);
        i++;
        setTimeout(type, 50 + Math.random() * 50);
      } else {
        setTimeout(() => {
          if (output) output.classList.remove('hidden');
        }, 500);
      }
    }

    setTimeout(type, 1500);
  });
</script>

<style>
  .terminal-cursor {
    display: inline-block;
    width: 8px;
    height: 16px;
    background: var(--color-foundry-secondary);
    margin-left: 4px;
    animation: blink 1s infinite;
  }
  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }
</style>
            </div>
          </div>
        </div>

        <!-- Floaties -->
        <div class="absolute -top-6 -right-6 glass-panel rounded-xl p-4 shadow-xl animate-bounce" style="animation-duration: 4s;">
          <span class="text-foundry-secondary font-bold">Stack Ready</span>
        </div>
        <div class="absolute -bottom-6 -left-6 glass-panel rounded-xl p-4 shadow-xl animate-bounce" style="animation-duration: 6s;">
          <span class="text-foundry-secondary font-bold">Seeds Loaded</span>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Simple Terminal Animation
  const textElement = document.getElementById('terminal-text');
  const commands = [
    'sscli new landing --theme emerging-emerald',
    '[Analizing soil quality...]',
    '[Planting seeds...] Done.',
    'sscli start',
    '>> Seed & Source alive at localhost:4321'
  ];

  let commandIndex = 0;
  let charIndex = 0;

  function type() {
    if (commandIndex < commands.length) {
      const currentCommand = commands[commandIndex];
      if (charIndex < currentCommand.length) {
        textElement.innerHTML += currentCommand.charAt(charIndex);
        charIndex++;
        setTimeout(type, 50);
      } else {
        textElement.innerHTML += '<br/>';
        charIndex = 0;
        commandIndex++;
        setTimeout(type, 1000);
      }
    }
  }

  // Use Intersection Observer to start animation when visible
  const observer = new IntersectionObserver((entries) => {
    if (entries[0].isIntersecting) {
      type();
      observer.disconnect();
    }
  }, { threshold: 0.5 });

  if (textElement) {
    observer.observe(textElement);
  }
</script>

        <!-- Trust indicators -->
        <div class="mt-12 flex flex-col sm:flex-row sm:items-center gap-6 sm:gap-8 text-sm text-gray-600">
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-secondary-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            <span>30+ Components & Patterns</span>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-secondary-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            <span>Full TypeScript Support</span>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-secondary-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            <span>Deploy in Hours</span>
          </div>
        </div>
      </div>

      <!-- Right: Hero Image -->
      {showHeroImage && (
        <div class="relative hidden lg:block">
          <div class="relative">
            <div class="absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-2xl blur-2xl opacity-20"></div>
            <div class="relative bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl overflow-hidden shadow-2xl">
              <div class="aspect-square flex items-center justify-center">
                <div class="text-center text-gray-400 p-8">
                  <svg class="w-24 h-24 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  <p class="font-semibold mb-2">Hero Showcase</p>
                  <p class="text-sm">Dashboard preview or demo video</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  </div>
</section>

<script>
  // Smooth scroll animation for CTA buttons
  document.querySelectorAll('[data-scroll-smooth]').forEach(button => {
    button.addEventListener('click', (e) => {
      const href = button.getAttribute('href');
      
      // Only use smooth scroll for anchor links
      if (href && !href.startsWith('/')) {
        e.preventDefault();
        const element = document.querySelector(href);
        if (element) {
          element.scrollIntoView({ behavior: 'smooth' });
        }
      }
      
      // Add click animation
      button.style.transform = 'scale(0.98)';
      setTimeout(() => {
        button.style.transform = 'scale(1)';
      }, 100);
    });
  });
</script>

<style>
  :global(body) {
    scroll-behavior: smooth;
  }
</style>
